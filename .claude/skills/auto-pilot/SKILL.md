# auto-pilot

全自动开发流程编排器，协调所有 Skills 并维护日期维度文档。

## 核心职责

**你只需要说"做什么"，剩下的全自动：**

1. 自动理解需求并记录
2. 自动生成计划和 TODO
3. 自动执行任务
4. 自动等待你验证
5. 自动提交和归档
6. 全程按日期维护文档

## 全自动流程

```
┌────────────────────────────────────────────────────────────┐
│                    AUTO-PILOT 全自动流程                    │
└────────────────────────────────────────────────────────────┘

你："帮我实现用户登录"
         │
         ▼
    ┌─────────┐
    │ 开始会话 │ ──→ 创建/加载今日日志 (.claude/daily/2024/01/10.md)
    └────┬────┘
         │
         ▼
    ┌─────────┐
    │ 需求分析 │ ──→ 自动记录到【🎯 需求记录】
    └────┬────┘
         │
         ▼
   ┌──────────┐     ━━━━━━━━━━━━━━━━━━━━━━━━
   │ 📍检查点1 │ ──→ 需求理解正确？确认继续？
   └────┬─────┘     ━━━━━━━━━━━━━━━━━━━━━━━━
         │ y
         ▼
    ┌─────────┐
    │ 生成计划 │ ──→ 自动记录到【📝 TODO 清单】
    └────┬────┘
         │
         ▼
   ┌──────────┐     ━━━━━━━━━━━━━━━━━━━━━━━━
   │ 📍检查点2 │ ──→ 任务分解合理？确认执行？
   └────┬─────┘     ━━━━━━━━━━━━━━━━━━━━━━━━
         │ y
         ▼
    ┌─────────┐
    │ 执行任务 │ ──→ 自动记录到【🔨 执行记录】
    └────┬────┘     （每个任务完成后自动更新）
         │
         ▼
   ┌──────────┐     ━━━━━━━━━━━━━━━━━━━━━━━━
   │ 📍检查点3 │ ──→ 任务完成，需要验证吗？
   └────┬─────┘     ━━━━━━━━━━━━━━━━━━━━━━━━
         │ y
         ▼
    ┌─────────┐
    │ 验证测试 │ ──→ 自动记录到【✅ 验证记录】
    └────┬────┘
         │
         ▼
   ┌──────────┐     ━━━━━━━━━━━━━━━━━━━━━━━━
   │ 📍检查点4 │ ──→ 验证通过？确认提交？
   └────┬─────┘     ━━━━━━━━━━━━━━━━━━━━━━━━
         │ y
         ▼
    ┌─────────┐
    │ Git提交 │ ──→ 自动记录到【📦 提交记录】
    └────┬────┘
         │
         ▼
    ┌─────────┐
    │ 归档同步 │ ──→ 更新【🗂️ 日终归档】+ 团队文档
    └────┬────┘
         │
         ▼
   ┌──────────┐     ━━━━━━━━━━━━━━━━━━━━━━━━
   │ 📍检查点5 │ ──→ 继续下一个需求？还是结束？
   └──────────┘     ━━━━━━━━━━━━━━━━━━━━━━━━
```

## 检查点详情

### 检查点 1：需求确认

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 检查点 1/5：需求分析完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📝 我理解的需求：

【功能】用户登录系统
【包含】
  - 邮箱登录
  - 手机号登录
  - JWT Token 认证
【不包含】
  - 第三方登录
  - 用户注册

【技术方案】
  - 使用 bcrypt 加密密码
  - JWT 有效期 2 小时
  - 存储使用 PostgreSQL

✅ 已记录到今日日志

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
理解正确吗？
  y - 正确，继续生成计划
  n - 不对，重新理解
  e - 需要修改部分内容
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 检查点 2：计划确认

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 检查点 2/5：任务计划生成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 任务分解（共 5 个）：

1. [ ] 设计用户数据模型
2. [ ] 实现登录接口
3. [ ] 实现 JWT 生成与验证
4. [ ] 添加密码加密
5. [ ] 编写单元测试

📁 预计修改文件：
  + src/models/user.ts
  + src/api/auth/login.ts
  + src/utils/jwt.ts
  + src/utils/password.ts
  + tests/auth.test.ts

✅ 已记录到今日日志

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
确认执行？
  y - 开始执行第一个任务
  n - 暂停，稍后继续
  e - 修改任务列表
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 检查点 3：执行完成

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 检查点 3/5：任务执行完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 已完成任务：

1. [x] 设计用户数据模型 (12分钟)
2. [x] 实现登录接口 (35分钟)
3. [x] 实现 JWT 生成与验证 (18分钟)
4. [x] 添加密码加密 (8分钟)
5. [x] 编写单元测试 (25分钟)

📁 实际修改：
  + src/models/user.ts (+45)
  + src/api/auth/login.ts (+78)
  + src/utils/jwt.ts (+35)
  + src/utils/password.ts (+22)
  + tests/auth.test.ts (+89)
  M src/app.ts (+5 -0)

✅ 已记录到今日日志

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
下一步？
  y - 运行测试验证
  n - 跳过验证，直接提交
  r - 需要修改某个任务
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 检查点 4：验证确认

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 检查点 4/5：验证完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🧪 测试结果：

  ✓ 邮箱登录成功 (45ms)
  ✓ 手机号登录成功 (38ms)
  ✓ 错误密码返回401 (12ms)
  ✓ 不存在用户返回404 (8ms)

  Tests: 4 passed, 0 failed
  Coverage: 87%

✅ 已记录到今日日志

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
验证通过，确认提交？
  y - 生成提交并推送
  n - 暂不提交
  f - 有问题需要修复
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 检查点 5：归档确认

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 检查点 5/5：归档完成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📦 提交完成：
  commit: a1b2c3d
  message: feat(auth): add user login with JWT

📄 文档已更新：
  - .claude/daily/2024/01/10.md (今日日志)
  - .claude/team/status.md (团队状态)
  - .claude/memory-bank/activeContext.md

🎉 本次开发完成！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
下一步？
  y - 继续开发新功能
  n - 结束今日工作
  v - 查看今日完整日志
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 文档自动维护

| 阶段 | 自动更新的文档 |
|------|----------------|
| 开始会话 | `daily/{date}.md` 创建/加载 |
| 需求分析 | `daily/{date}.md` → 需求记录 |
| 生成计划 | `daily/{date}.md` → TODO清单 |
| 执行任务 | `daily/{date}.md` → 执行记录 |
| 验证测试 | `daily/{date}.md` → 验证记录 |
| Git提交 | `daily/{date}.md` → 提交记录 |
| 归档 | `daily/{date}.md` → 日终归档 |
| 归档 | `team/status.md` → 团队状态 |
| 归档 | `memory-bank/*.md` → 持久记忆 |

## 多人协作

每个人的开发都会自动记录，团队可以：

```
/daily:today          # 查看今日所有人的工作
/daily:team           # 查看团队状态
/daily:handoff @张三  # 交接给某人
```

## 启用方式

**默认启用**，无需任何配置。只要安装了 project-manager，auto-pilot 就会自动工作。

你只需要：
1. 打开 Claude Code
2. 说"帮我实现 xxx"
3. 在每个检查点确认即可
