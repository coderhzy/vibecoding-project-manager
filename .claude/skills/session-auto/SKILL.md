# session-auto

自动管理开发会话的生命周期：开始、追踪、结束。

## 触发条件

### 自动开始会话
- 对话开始时，检测到没有活跃会话
- 用户开始新的开发任务

### 自动更新会话
- 完成重要里程碑时
- 做出技术决策时
- 遇到并解决问题时

### 自动结束会话
- 用户明确表示结束
- 检测到长时间无活动
- 完成既定目标时

## 会话状态机

```
[无会话] --开始任务--> [活跃会话] --完成/结束--> [归档会话]
                           |
                           +--更新--> [活跃会话]
```

## 执行流程

### 开始会话

1. 生成会话ID：`{YYYY-MM-DD}-{HHMM}-{任务关键词}`
2. 创建会话文件：`.claude/sessions/{session_id}.md`
3. 记录会话元数据：
   - 开始时间
   - 任务目标
   - 相关文件
4. 更新 `activeContext.md` 标记当前会话

### 追踪会话

持续记录：
- 修改的文件列表
- 关键决策和理由
- 遇到的问题和解决方案
- 学到的经验

### 结束会话

1. 生成会话总结
2. 提取可复用知识
3. 更新 `progress.md`
4. 归档会话文件

## 会话文件格式

```markdown
# 会话：{任务描述}

- **ID**：{session_id}
- **开始**：{timestamp}
- **状态**：活跃 | 已完成 | 已中断

## 目标

{本次会话要完成的任务}

## 进展

### {时间点1}
- {完成的内容}

### {时间点2}
- {完成的内容}

## 修改文件

- `path/to/file1.ts` - {修改说明}
- `path/to/file2.py` - {修改说明}

## 决策记录

### 决策1：{决策标题}
- **背景**：{为什么需要决策}
- **选项**：{考虑的方案}
- **决定**：{最终选择}
- **理由**：{为什么这样选}

## 问题与解决

### 问题1：{问题描述}
- **原因**：{根本原因}
- **解决**：{解决方案}

## 总结

{会话结束时填写}

## 下一步

- [ ] {待办1}
- [ ] {待办2}
```

## 手动触发

```
/session:start {任务描述}
/session:update
/session:end
```
