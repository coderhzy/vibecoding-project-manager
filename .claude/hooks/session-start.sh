#!/bin/bash
# ä¼šè¯å¼€å§‹æ—¶è‡ªåŠ¨åˆ›å»ºä»Šæ—¥æ—¥å¿—

YEAR=$(date +%Y)
MONTH=$(date +%m)
DAY=$(date +%d)
TIME=$(date +%H:%M)

LOG_DIR=".claude/daily/${YEAR}/${MONTH}"
LOG_FILE="${LOG_DIR}/${DAY}.md"

# åˆ›å»ºç›®å½•
mkdir -p "$LOG_DIR"

# å¦‚æžœä»Šæ—¥æ—¥å¿—ä¸å­˜åœ¨ï¼Œä»Žæ¨¡æ¿åˆ›å»º
if [ ! -f "$LOG_FILE" ]; then
    if [ -f ".claude/daily/_template.md" ]; then
        cp ".claude/daily/_template.md" "$LOG_FILE"
        # æ›¿æ¢æ—¥æœŸå ä½ç¬¦
        sed -i '' "s/{DATE}/${YEAR}-${MONTH}-${DAY}/g" "$LOG_FILE" 2>/dev/null || true
    else
        cat > "$LOG_FILE" << EOF
# å¼€å‘æ—¥å¿— ${YEAR}-${MONTH}-${DAY}

## ðŸ“‹ ä»Šæ—¥æ¦‚è§ˆ
- å¼€å§‹æ—¶é—´: ${TIME}
- çŠ¶æ€: è¿›è¡Œä¸­

## ðŸŽ¯ éœ€æ±‚è®°å½•

## ðŸ“ TODO æ¸…å•

## ðŸ”¨ æ‰§è¡Œè®°å½•

## âœ… éªŒè¯è®°å½•

## ðŸ“¦ æäº¤è®°å½•

## ðŸ—‚ï¸ æ—¥ç»ˆå½’æ¡£
EOF
    fi
    echo "âœ… å·²åˆ›å»ºä»Šæ—¥æ—¥å¿—: ${LOG_FILE}"
fi

# è¾“å‡ºæé†’ï¼ˆä¼šæ˜¾ç¤ºåœ¨ Claude ä¸Šä¸‹æ–‡ä¸­ï¼‰
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸ“… ä»Šæ—¥æ—¥å¿—: ${LOG_FILE}"
echo "â° å½“å‰æ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âš ï¸ æé†’ï¼šå¼€å‘ä»»åŠ¡è¯·éµå¾ªå·¥ä½œæµï¼ˆæ£€æŸ¥ç‚¹ + æ—¥å¿—è®°å½•ï¼‰"
echo ""

exit 0
